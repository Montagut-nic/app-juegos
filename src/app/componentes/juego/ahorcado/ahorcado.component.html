<main class="container">
    <section class="mm-shell">
        <header class="mm-header">
            <div class="card">
                <div class="stats">
                    <div><strong>Racha:</strong> {{ racha() }}</div>
                    <div><strong>Vidas:</strong> {{ remaining() }}</div>
                </div>
                <div class="hint">
                    Tenés 6 vidas para adivinar la palabra. Cada error te quita una vida.
                </div>
            </div>
        </header>
        @if (estado() !== 'jugando'){
        <footer class="hm-actions">
            <button class="pill" (click)="nuevaPartida()">Nueva partida</button>
            @if (estado() === 'perdiste') {
            <div class="hm-reveal">La palabra era: <strong>{{ palabra() }}</strong></div>
            }
        </footer>
        }
        @if (estado() !== 'esperando') {
        <!-- Contenedor de doble capa con animación -->
        <div class="hm-stage">
            <img class="hm-img base" [src]="imgPrev()" alt="estado ahorcado base">
            <img class="hm-img overlay" [src]="imgCurr()" alt="estado ahorcado animado" [class.reveal]="animando()"
                (animationend)="onRevealDone()">
        </div>
        <div class="hm-word" aria-label="palabra a adivinar">
            {{ palabraOculta() }}
        </div>
        <div class="hm-letters">
            <button class="pill" *ngFor="let letra of letrasDisponibles" (click)="jugarLetra(letra)"
                [disabled]="estado() !== 'jugando' || letrasAdivinadas().has(letra) || letrasErradas().has(letra)">
                {{ letra }}
            </button>
        </div>
        }
    </section>
</main>